@model LandingPad.Models.Writing
@{ 
    //get the author name for the byline
    string author;

    if(Model.WritingPseudonyms.Count > 0)
    {
        author = Model.WritingPseudonyms.FirstOrDefault().Pseudonym.Pseudonym1;
    }
    else if(Model.LPProfile.DisplayRealName && Model.LPProfile.LPUser.GivenName != null && Model.LPProfile.LPUser.Surname != null)
    {
        author = Model.LPProfile.LPUser.GivenName + " " + Model.LPProfile.LPUser.Surname;
    }
    else
    {
        author = Model.LPProfile.LPUser.Username;
    }

    //a variable for the tag scroller class that will
    //be collapse if there aren't any tags so that the
    //tag scroller only shows up if there are tags to 
    //display
    string tagCollapse = "";

    if(Model.WritingFormats.Count() <= 0)
    {
        tagCollapse = " collapse";
    }
}

<div class="writingPreview">
    <div class="addDateTime">Posted @Html.DisplayFor(model => model.AddDate)</div>
    <h3>@Model.Title</h3>
    <h4>By @author</h4>
    <div class="writingDescription">
        <div class="descriptionText">
            <p>@Html.DisplayFor(model => model.DescriptionText)</p>
            <span class="viewMore"><a href="~/Writing/ViewWriting/@Model.WritingID">Read More</a><span class="forUserWriting collapse"> | <a href="~/Writing/Edit/@Model.WritingID">Edit</a> | <a href="~/Writing/Delete/@Model.WritingID">Delete</a></span></span>
        </div>
    </div>
    <div class="tagScroller @Model.WritingID@tagCollapse"><button class="scrollLeft scrollArrow" data-scroll-modifier='-1' data-parent="@Model.WritingID">&#9666;</button><button class="scrollRight scrollArrow" data-scroll-modifier="1" data-parent="@Model.WritingID">&#9656;</button><div class="tagScrollbar" data-parent="@Model.WritingID">@foreach (var item in Model.WritingFormats){<span class="scrollbarTag"><a href="~/Writing/SearchByFormatTag/@item.FormatID">#@item.FormatTag.FormatName</a></span>foreach (var subitem in item.FormatTag.AltFormatNames){<span class="scrollbarTag"><a href="~/Writing/SearchByFormatTag/@item.FormatID">#@subitem.AltName</a></span>}}</div></div>
</div>
